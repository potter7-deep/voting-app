{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "NIXPACKS",
    "buildCommand": "npm install && cd server && npm install && cd ../client && npm install && cd ../client && npm run build",
    "outputDir": "client/dist"
  },
  "deploy": {
    "numReplicas": 1,
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10,
    "healthcheckPath": "/api/health",
    "healthcheckPort": 5000,
    "startCommand": "cd server && npm start"
  },
  "env": {
    "NODE_ENV": {
      "runtime": "NODE_ENV=production"
    },
    "PORT": {
      "runtime": "PORT=5000"
    },
    "CORS_ORIGIN": {
      "runtime": "CORS_ORIGIN=${{RAILWAY_PUBLIC_DOMAIN}}"
    },
    "JWT_SECRET": {
      "runtime": "JWT_SECRET=railway-voting-app-secret-key-2024-secure"
    },
    "DB_PATH": {
      "runtime": "DB_PATH=/app/server/voting_system.sqlite"
    },
    "VITE_API_URL": {
      "runtime": "VITE_API_URL=/api"
    },
    "VITE_APP_TITLE": {
      "runtime": "VITE_APP_TITLE=University Voting System"
    }
  },
  "name": "voting-app",
  "region": "us"
}

